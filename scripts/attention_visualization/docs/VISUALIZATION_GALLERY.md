# Visualization Gallery

## Complete Reference of All Generated Visualizations

This document provides a comprehensive gallery and description of every visualization generated by the attention visualization experiment.

---

## Table of Contents

1. [DIY Dataset Visualizations](#1-diy-dataset-visualizations)
2. [Geolife Dataset Visualizations](#2-geolife-dataset-visualizations)
3. [Cross-Dataset Comparison Visualizations](#3-cross-dataset-comparison-visualizations)
4. [Visualization Interpretation Guide](#4-visualization-interpretation-guide)

---

## 1. DIY Dataset Visualizations

### 1.1 Aggregate Pointer Attention

**Files**: 
- `results/diy/aggregate_pointer_attention.png`
- `results/diy/aggregate_pointer_attention.pdf`

**Description**: Two-panel figure showing overall pointer attention patterns.

| Panel | Content | Key Insight |
|-------|---------|-------------|
| Left | Position-wise mean attention | Position t-1 receives 21.05% attention |
| Right | Attention entropy histogram | Mean entropy: 2.34 nats |

**Scientific Value**: Reveals the recency bias in attention - position t-1 (second most recent) is most attended, not the most recent position t-0.

---

### 1.2 Gate Analysis

**Files**:
- `results/diy/gate_analysis.png`
- `results/diy/gate_analysis.pdf`

**Description**: Three-panel analysis of the pointer-generation gate mechanism.

| Panel | Content | Key Insight |
|-------|---------|-------------|
| Left | Gate value distribution | Mean: 0.787, strongly right-skewed |
| Center | Gate by prediction outcome | Correct: 0.817, Incorrect: 0.749 |
| Right | Gate vs sequence length | Stable across lengths (~0.75-0.80) |

**Scientific Value**: Demonstrates that higher gate values correlate with correct predictions, validating the pointer mechanism's effectiveness.

---

### 1.3 Self-Attention Aggregate

**Files**:
- `results/diy/self_attention_aggregate.png`
- `results/diy/self_attention_aggregate.pdf`

**Description**: Heatmaps showing aggregated self-attention patterns from transformer layers.

| Layer | Pattern | Interpretation |
|-------|---------|----------------|
| Layer 1 | Strong diagonal, recent focus | Local context encoding |
| Layer 2 | Distributed, position 0 column brighter | Global information integration |

**Scientific Value**: Shows how self-attention captures both local (layer 1) and global (layer 2) dependencies in the sequence.

---

### 1.4 Position Bias Analysis

**Files**:
- `results/diy/position_bias_analysis.png`
- `results/diy/position_bias_analysis.pdf`

**Description**: Analysis of the learned position bias parameter.

| Panel | Content | Key Insight |
|-------|---------|-------------|
| Left | Raw bias values | Oscillating pattern (-0.3 to +0.3) |
| Right | Bias-only attention | Non-uniform position preference |

**Scientific Value**: Reveals that the model learns complex positional preferences beyond simple recency decay.

---

### 1.5 Samples Overview

**Files**:
- `results/diy/samples_overview.png`
- `results/diy/samples_overview.pdf`

**Description**: Grid visualization of 10 selected samples' pointer attention patterns.

**Layout**: 2 rows × 5 columns

**Key Observations**:
- All samples predict location L17
- Gate values uniformly high (>0.96)
- Shorter sequences show higher max attention
- Green dashed lines mark target location in history

---

### 1.6 Individual Sample Attention (Samples 1-10)

**Files**:
- `results/diy/sample_01_attention.png` through `sample_10_attention.png`
- Corresponding PDF versions

**Description**: Detailed four-panel analysis for each selected sample.

**Layout per sample**:

```
┌───────────────────────────────┬───────────────┐
│  Pointer Attention (bars)     │ Score         │
│  - X: Position labels         │ Decomposition │
│  - Y: Attention weight        │ (raw + bias)  │
│  - Color: Attention intensity │               │
├───────────────────────────────┴───────────────┤
│          Self-Attention Heatmaps              │
│          (Layer 1, Layer 2)                   │
├───────────────────────────────────────────────┤
│          Multi-Head Attention Comparison      │
│          (Heads 1-4 of Layer 1)               │
└───────────────────────────────────────────────┘
```

**Sample Details**:

| Sample | Length | Target | Gate | Max Attn | Notable Pattern |
|--------|--------|--------|------|----------|-----------------|
| 1 | 29 | L17 | 0.972 | 0.153 | Distributed attention |
| 2 | 12 | L17 | 0.972 | 0.282 | Moderate peak |
| 3 | 13 | L17 | 0.968 | 0.213 | Multiple peaks |
| 4 | 11 | L17 | 0.968 | 0.244 | Recent focus |
| 5 | 10 | L17 | 0.966 | 0.228 | Even distribution |
| 6 | 29 | L17 | 0.968 | 0.173 | Long sequence |
| 7 | 11 | L17 | 0.967 | 0.204 | Moderate |
| 8 | 6 | L17 | 0.965 | 0.323 | Shortest, highest max |
| 9 | 13 | L17 | 0.965 | 0.253 | Multiple peaks |
| 10 | 14 | L17 | 0.964 | 0.223 | Well-distributed |

---

## 2. Geolife Dataset Visualizations

### 2.1 Aggregate Pointer Attention

**Files**:
- `results/geolife/aggregate_pointer_attention.png`
- `results/geolife/aggregate_pointer_attention.pdf`

**Key Differences from DIY**:
- Lower peak at position t-1 (13.05% vs 21.05%)
- Secondary peak at position t-3 (10.01%)
- Lower mean entropy (1.98 vs 2.34)

---

### 2.2 Gate Analysis

**Files**:
- `results/geolife/gate_analysis.png`
- `results/geolife/gate_analysis.pdf`

**Key Differences from DIY**:
- Lower mean gate (0.627 vs 0.787)
- Higher gate variance (0.229 vs 0.137)
- Still shows correct > incorrect pattern
- More uniform distribution across gate values

---

### 2.3 Self-Attention Aggregate

**Files**:
- `results/geolife/self_attention_aggregate.png`
- `results/geolife/self_attention_aggregate.pdf`

**Key Differences from DIY**:
- 2 attention heads (vs 4 in DIY)
- Larger head dimension (48 vs 16)
- Similar layer-wise patterns

---

### 2.4 Position Bias Analysis

**Files**:
- `results/geolife/position_bias_analysis.png`
- `results/geolife/position_bias_analysis.pdf`

**Key Differences from DIY**:
- Different bias pattern due to different model configuration
- Similar oscillating behavior

---

### 2.5 Samples Overview

**Files**:
- `results/geolife/samples_overview.png`
- `results/geolife/samples_overview.pdf`

**Key Differences from DIY**:
- Diverse target locations (L14, L7, L1151, L336, L553)
- Higher max attention values (up to 0.757)
- More peaked attention patterns

---

### 2.6 Individual Sample Attention (Samples 1-10)

**Files**:
- `results/geolife/sample_01_attention.png` through `sample_10_attention.png`

**Sample Details**:

| Sample | Length | Target | Gate | Max Attn | Notable Pattern |
|--------|--------|--------|------|----------|-----------------|
| 1 | 41 | L14 | 0.961 | 0.261 | Long sequence |
| 2 | 14 | L7 | 0.942 | 0.542 | Strong peak |
| 3 | 35 | L14 | 0.936 | 0.217 | Distributed |
| 4 | 12 | L1151 | 0.924 | 0.757 | Highest max |
| 5 | 8 | L336 | 0.918 | 0.729 | Short, focused |
| 6 | 15 | L7 | 0.958 | 0.380 | Moderate |
| 7 | 12 | L1151 | 0.905 | 0.612 | Strong focus |
| 8 | 9 | L1151 | 0.913 | 0.426 | Moderate |
| 9 | 36 | L14 | 0.922 | 0.228 | Long sequence |
| 10 | 12 | L553 | 0.934 | 0.521 | Strong peak |

---

## 3. Cross-Dataset Comparison Visualizations

### 3.1 Gate Comparison

**Files**:
- `results/cross_dataset_gate_comparison.png`
- `results/cross_dataset_gate_comparison.pdf`

**Description**: Side-by-side comparison of gate values and position attention.

| Panel | Content | Key Comparison |
|-------|---------|----------------|
| Left | Mean gate bars with error | DIY: 0.787±0.137, Geolife: 0.627±0.229 |
| Right | Position attention grouped bars | DIY dominant at t-1 (0.21 vs 0.13) |

**Statistical Significance**: Gate difference is highly significant (p < 0.0001).

---

### 3.2 Attention Pattern Comparison

**Files**:
- `results/cross_dataset_attention_patterns.png`
- `results/cross_dataset_attention_patterns.pdf`

**Description**: Four-panel comprehensive comparison.

| Panel | Position | Content | Key Finding |
|-------|----------|---------|-------------|
| A | Top-Left | Recency decay | DIY has sharper t-1 peak |
| B | Top-Right | Cumulative attention | DIY concentrates more in recent |
| C | Bottom-Left | Gate by outcome | Both show correct > incorrect |
| D | Bottom-Right | Summary metrics | DIY higher on 3/4 metrics |

---

## 4. Visualization Interpretation Guide

### 4.1 Color Schemes

| Visualization | Color Scheme | Interpretation |
|---------------|--------------|----------------|
| Pointer attention bars | Yellow → Red | Low → High attention |
| Self-attention heatmaps | Blues | Dark = high attention |
| Gate violin plots | Green/Red | Correct/Incorrect |
| Dataset comparison | Green/Blue | DIY/Geolife |
| Multi-head comparison | Viridis | Low → High attention |

### 4.2 Axis Conventions

| Axis Type | Standard Meaning |
|-----------|-----------------|
| "Position from end" | 0 = most recent, 1 = second most recent, etc. |
| "Key position" | Column in attention matrix (attended to) |
| "Query position" | Row in attention matrix (attending from) |
| "Gate value" | 0 = pure generation, 1 = pure pointer |
| "Entropy" | Higher = more spread attention |

### 4.3 Annotations

| Annotation Type | Meaning |
|-----------------|---------|
| Dashed vertical line | Mean or threshold |
| Green dashed line (samples) | Target location position |
| Black border (bars) | Maximum attention position |
| Error bars | Standard deviation |
| Arrows | Highlight important features |

### 4.4 How to Read Attention Heatmaps

```
              Key Positions (what is attended to)
              ─────────────────────────────────────►
           ┌─────────────────────────────────────────┐
       ▲   │  .   .   .   .   ■   ■   ■   □   □   □  │
       │   │  .   .   .   ■   ■   ■   □   □   □   .  │
Query  │   │  .   .   ■   ■   ■   □   □   □   .   .  │
Pos.   │   │  .   ■   ■   ■   □   □   □   .   .   .  │
       │   │  ■   ■   ■   □   □   □   .   .   .   .  │
           └─────────────────────────────────────────┘
           
■ = High attention    □ = Medium attention    . = Low attention

Diagonal pattern: Local attention (each position attends to itself)
Vertical stripe: Global attention (all positions attend to one position)
Horizontal stripe: Broadcasting (one position attends to everything)
```

### 4.5 Interpreting Gate Values

| Gate Value | Interpretation |
|------------|----------------|
| > 0.9 | Almost pure pointer (copying from history) |
| 0.7 - 0.9 | Strong pointer preference |
| 0.5 - 0.7 | Balanced, slight pointer preference |
| 0.3 - 0.5 | Balanced, slight generation preference |
| < 0.3 | Strong generation preference |
| < 0.1 | Almost pure generation (full vocabulary) |

**Dataset Averages**:
- DIY: 0.787 (strong pointer)
- Geolife: 0.627 (balanced/pointer)

### 4.6 Interpreting Entropy Values

| Entropy (nats) | Effective Positions | Interpretation |
|----------------|---------------------|----------------|
| 0.0 | 1 | All attention on one position |
| 1.0 | ~2.7 | Very focused |
| 2.0 | ~7.4 | Moderately focused |
| 3.0 | ~20 | Spread |
| 4.0 | ~55 | Very spread |

**Formula**: Effective positions ≈ exp(entropy)

**Dataset Averages**:
- DIY: 2.34 nats (~10.4 effective positions)
- Geolife: 1.98 nats (~7.2 effective positions)

---

## Quick Reference: File Locations

### DIY Dataset
```
results/diy/
├── aggregate_pointer_attention.{png,pdf}
├── attention_statistics.{csv,tex}
├── experiment_metadata.json
├── gate_analysis.{png,pdf}
├── position_attention.csv
├── position_bias_analysis.{png,pdf}
├── sample_01_attention.{png,pdf}
├── sample_02_attention.{png,pdf}
├── ...
├── sample_10_attention.{png,pdf}
├── samples_overview.{png,pdf}
├── selected_samples.{csv,tex}
└── self_attention_aggregate.{png,pdf}
```

### Geolife Dataset
```
results/geolife/
├── (same structure as DIY)
```

### Cross-Dataset
```
results/
├── cross_dataset_attention_patterns.{png,pdf}
├── cross_dataset_comparison.{csv,tex}
├── cross_dataset_gate_comparison.{png,pdf}
├── key_findings.{csv,tex}
```

---

*Visualization Gallery - Version 1.0*
*Total Visualizations: 36 PNG + 36 PDF = 72 image files*
