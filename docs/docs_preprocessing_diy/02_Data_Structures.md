# Data Structures Documentation

## ğŸ“‹ Table of Contents
1. [Overview](#overview)
2. [Raw Data Structures](#raw-data-structures)
3. [Interim Data Structures](#interim-data-structures)
4. [Processed Data Structures](#processed-data-structures)
5. [Metadata Structure](#metadata-structure)
6. [Complete Data Flow Example](#complete-data-flow-example)

---

## Overview

This document provides comprehensive documentation of all data structures used throughout the DIY dataset preprocessing pipeline. Understanding these structures is essential for debugging, extending, or modifying the pipeline.

---

## Raw Data Structures

### 1. Raw GPS Data (Input to Notebook)

**File**: `clean_gps_data_v11_csv_trackintel/*.csv`  
**Format**: CSV  
**Records**: ~165,429,633

```
Schema:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Column         â”‚ Type     â”‚ Description                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ user_id        â”‚ string   â”‚ UUID identifying the user                           â”‚
â”‚ latitude       â”‚ float64  â”‚ GPS latitude (-90 to 90)                            â”‚
â”‚ longitude      â”‚ float64  â”‚ GPS longitude (-180 to 180)                         â”‚
â”‚ tracked_at     â”‚ datetime â”‚ Timestamp of GPS recording (ISO 8601)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Example:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ user_id                                  â”‚ latitude   â”‚ longitude           â”‚ tracked_at              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 9358664f-ad4b-46ff-9a65-e2efbf646e6e    â”‚ -7.74776   â”‚ 110.431541442871094 â”‚ 2021-10-24T02:07:56.000Zâ”‚
â”‚ 19b36aee-5acc-402f-a19b-c7f391d9361c    â”‚ -7.81982   â”‚ 110.468696594238281 â”‚ 2021-10-24T03:05:21.000Zâ”‚
â”‚ a7620c22-60ed-48bf-a444-3df5ed286a16    â”‚ -7.63941   â”‚ 110.361770629882798 â”‚ 2021-10-24T12:53:19.000Zâ”‚
â”‚ 56bff668-491b-4d6b-8b45-5328e0f0af4d    â”‚ -7.71172   â”‚ 110.385742187500000 â”‚ 2021-10-24T14:06:10.000Zâ”‚
â”‚ b2df15fb-1581-45a2-bd53-716e4f75b82d    â”‚ -7.909909  â”‚ 110.347175598144517 â”‚ 2021-10-25T06:42:30.000Zâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Geographic Location:
â€¢ Data is centered around Yogyakarta, Indonesia
â€¢ Latitude range: approximately -7.5 to -8.0 (South)
â€¢ Longitude range: approximately 110.2 to 110.5 (East)
```

### 2. Positionfixes (GeoDataFrame)

**Created by**: `ti.io.read_positionfixes_gpd()`  
**Format**: In-memory GeoDataFrame

```
Schema:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Column         â”‚ Type         â”‚ Description                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ user_id        â”‚ string       â”‚ UUID identifying the user                           â”‚
â”‚ tracked_at     â”‚ datetime64   â”‚ Timestamp with timezone (Asia/Jakarta)              â”‚
â”‚ geometry       â”‚ POINT        â”‚ Shapely Point geometry (lon, lat)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Example:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ user_id                                  â”‚ tracked_at                      â”‚ geometry                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 9358664f-ad4b-46ff-9a65-e2efbf646e6e    â”‚ 2021-10-24 09:07:56+07:00       â”‚ POINT(110.4315 -7.7478)   â”‚
â”‚ 19b36aee-5acc-402f-a19b-c7f391d9361c    â”‚ 2021-10-24 10:05:21+07:00       â”‚ POINT(110.4687 -7.8198)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Note: timezone is set to 'Asia/Jakarta' (UTC+7) for the DIY dataset
```

### 3. Staypoints (Output from generate_staypoints)

**File**: `3_staypoints_fun_generate_trips.csv`  
**Format**: CSV (Trackintel Staypoints format)

```
Schema:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Column         â”‚ Type         â”‚ Description                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id             â”‚ int64        â”‚ Unique staypoint identifier (index)                 â”‚
â”‚ user_id        â”‚ string       â”‚ UUID identifying the user                           â”‚
â”‚ started_at     â”‚ datetime64   â”‚ Start time of the staypoint                         â”‚
â”‚ finished_at    â”‚ datetime64   â”‚ End time of the staypoint                           â”‚
â”‚ geom           â”‚ POINT        â”‚ Centroid geometry of the staypoint (WKT)            â”‚
â”‚ is_activity    â”‚ bool         â”‚ True if duration > 25 minutes (activity threshold)  â”‚
â”‚ trip_id        â”‚ int64/NaN    â”‚ Associated trip ID (if part of a trip)              â”‚
â”‚ prev_trip_id   â”‚ int64/NaN    â”‚ Previous trip ID                                    â”‚
â”‚ next_trip_id   â”‚ int64/NaN    â”‚ Next trip ID                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Example:
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ user_id  â”‚ started_at          â”‚ finished_at         â”‚ geom                        â”‚ is_activity â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ user_001 â”‚ 2021-10-24 02:07:56 â”‚ 2021-10-24 08:30:00 â”‚ POINT(110.431541 -7.74776)  â”‚ True        â”‚
â”‚ 1  â”‚ user_001 â”‚ 2021-10-24 08:35:00 â”‚ 2021-10-24 08:50:00 â”‚ POINT(110.425000 -7.75000)  â”‚ False       â”‚
â”‚ 2  â”‚ user_001 â”‚ 2021-10-24 09:15:00 â”‚ 2021-10-24 12:45:00 â”‚ POINT(110.385742 -7.71172)  â”‚ True        â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Detection Parameters:
â€¢ method: 'sliding' (sliding window algorithm)
â€¢ dist_threshold: 100 meters (maximum distance to stay in cluster)
â€¢ time_threshold: 30 minutes (minimum time to qualify as staypoint)
â€¢ gap_threshold: 24*60 minutes (maximum gap allowed in tracking)

Activity Flag:
â€¢ time_threshold: 25 minutes
â€¢ is_activity = True if staypoint duration > 25 minutes
```

### 4. Valid Users Filter

**File**: `10_filter_after_user_quality_DIY_slide_filteres.csv`  
**Format**: CSV

```
Schema:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Column         â”‚ Type         â”‚ Description                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ user_id        â”‚ string       â”‚ UUID of user passing quality filter                 â”‚
â”‚ quality        â”‚ float64      â”‚ Mean tracking quality score (0-1)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Example:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ user_id                                  â”‚ quality      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0a1b2c3d-4e5f-6789-abcd-ef0123456789    â”‚ 0.823        â”‚
â”‚ 1b2c3d4e-5f6a-7890-bcde-f01234567890    â”‚ 0.756        â”‚
â”‚ 2c3d4e5f-6a7b-8901-cdef-012345678901    â”‚ 0.891        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Quality Filter Criteria:
â€¢ day_filter: > 60 days of tracking
â€¢ min_thres: 0.6 (minimum quality in any sliding window)
â€¢ mean_thres: 0.7 (mean quality across all windows)
â€¢ window_size: 10 weeks (sliding window for quality calculation)
```

---

## Interim Data Structures

### 5. Intermediate Dataset

**File**: `intermediate_eps{epsilon}.csv` or `intermediate_h3r{resolution}.csv`  
**Format**: CSV

```
Schema:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Column         â”‚ Type         â”‚ Description                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id             â”‚ int64        â”‚ Unique staypoint identifier (sequential)            â”‚
â”‚ user_id        â”‚ int64        â”‚ Integer user ID (re-encoded from UUID)              â”‚
â”‚ location_id    â”‚ int64        â”‚ Clustered location identifier                       â”‚
â”‚ start_day      â”‚ int64        â”‚ Days since first tracking day (per user)            â”‚
â”‚ end_day        â”‚ int64        â”‚ End day since first tracking day                    â”‚
â”‚ start_min      â”‚ int64        â”‚ Start minute of day (0-1439)                        â”‚
â”‚ end_min        â”‚ int64        â”‚ End minute of day (1-1440)                          â”‚
â”‚ weekday        â”‚ int64        â”‚ Day of week (0=Monday, 6=Sunday)                    â”‚
â”‚ duration       â”‚ float64      â”‚ Duration in minutes                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Example:
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ user_id â”‚ location_id â”‚ start_day â”‚ end_day â”‚ start_min â”‚ end_min â”‚ weekday â”‚ duration â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ 0       â”‚ 42          â”‚ 0         â”‚ 0       â”‚ 127       â”‚ 510     â”‚ 6       â”‚ 383      â”‚
â”‚ 1  â”‚ 0       â”‚ 15          â”‚ 0         â”‚ 0       â”‚ 555       â”‚ 765     â”‚ 6       â”‚ 210      â”‚
â”‚ 2  â”‚ 0       â”‚ 42          â”‚ 0         â”‚ 0       â”‚ 810       â”‚ 1020    â”‚ 6       â”‚ 210      â”‚
â”‚ 3  â”‚ 0       â”‚ 8           â”‚ 0         â”‚ 0       â”‚ 1065      â”‚ 1170    â”‚ 6       â”‚ 105      â”‚
â”‚ 4  â”‚ 0       â”‚ 42          â”‚ 0         â”‚ 1       â”‚ 1200      â”‚ 420     â”‚ 6       â”‚ 660      â”‚
â”‚ 5  â”‚ 0       â”‚ 15          â”‚ 1         â”‚ 1       â”‚ 540       â”‚ 750     â”‚ 0       â”‚ 210      â”‚
â”‚ 6  â”‚ 0       â”‚ 42          â”‚ 1         â”‚ 1       â”‚ 810       â”‚ 1193    â”‚ 0       â”‚ 383      â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Column Details:

â€¢ start_day: 
  - Formula: (started_at - min_day_per_user).days
  - Represents relative day number since user's first record
  - Example: User started tracking on Oct 24, 2021
    - Oct 24 â†’ start_day = 0
    - Oct 25 â†’ start_day = 1
    - Nov 23 â†’ start_day = 30

â€¢ start_min:
  - Formula: hour * 60 + minute
  - Range: 0 to 1439 (23*60 + 59)
  - Example: 
    - 00:00 â†’ 0
    - 09:15 â†’ 555 (9*60 + 15)
    - 23:59 â†’ 1439

â€¢ end_min:
  - Formula: hour * 60 + minute, with special case for midnight
  - Range: 1 to 1440
  - Special: 00:00 becomes 1440 (24*60) to represent end of day
  - Example:
    - 00:00 â†’ 1440 (end of previous day)
    - 12:45 â†’ 765 (12*60 + 45)

â€¢ weekday:
  - 0 = Monday
  - 1 = Tuesday
  - 2 = Wednesday
  - 3 = Thursday
  - 4 = Friday
  - 5 = Saturday
  - 6 = Sunday

â€¢ duration:
  - Formula: (finished_at - started_at).total_seconds() // 60
  - Units: minutes
  - Maximum: 2879 (truncated to max_duration - 1)
```

### 6. Locations Dataset

**File**: `locations_eps{epsilon}.csv` or `locations_h3r{resolution}.csv`  
**Format**: CSV

#### DBSCAN Version:
```
Schema (DBSCAN):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Column         â”‚ Type         â”‚ Description                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ location_id    â”‚ int64        â”‚ Unique location identifier (index)                  â”‚
â”‚ center         â”‚ POINT        â”‚ Centroid geometry of the cluster                    â”‚
â”‚ extent         â”‚ POLYGON      â”‚ Convex hull of all staypoints in cluster            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### H3 Version:
```
Schema (H3):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Column         â”‚ Type         â”‚ Description                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ location_id    â”‚ int64        â”‚ Unique location identifier (index)                  â”‚
â”‚ h3_cell        â”‚ string       â”‚ H3 cell index (hexadecimal string)                  â”‚
â”‚ center_lat     â”‚ float64      â”‚ Latitude of H3 cell center                          â”‚
â”‚ center_lng     â”‚ float64      â”‚ Longitude of H3 cell center                         â”‚
â”‚ h3_resolution  â”‚ int64        â”‚ H3 resolution level (0-15)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Example (H3):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ location_id â”‚ h3_cell           â”‚ center_lat â”‚ center_lng â”‚ h3_resolution â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0           â”‚ 88680c4801fffff   â”‚ -7.747760  â”‚ 110.431541 â”‚ 8             â”‚
â”‚ 1           â”‚ 88680c4803fffff   â”‚ -7.711720  â”‚ 110.385742 â”‚ 8             â”‚
â”‚ 2           â”‚ 88680c4805fffff   â”‚ -7.763980  â”‚ 110.390480 â”‚ 8             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7. Merged Staypoints

**File**: `staypoints_merged_eps{epsilon}.csv` or `staypoints_merged_h3r{resolution}.csv`  
**Format**: CSV

```
Schema:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Column         â”‚ Type         â”‚ Description                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id             â”‚ int64        â”‚ Staypoint identifier                                â”‚
â”‚ user_id        â”‚ string       â”‚ User identifier                                     â”‚
â”‚ started_at     â”‚ datetime64   â”‚ Start time of merged staypoint                      â”‚
â”‚ finished_at    â”‚ datetime64   â”‚ End time of merged staypoint                        â”‚
â”‚ geom           â”‚ POINT        â”‚ Centroid geometry                                   â”‚
â”‚ location_id    â”‚ int64        â”‚ Assigned location ID                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Merging Logic:
â€¢ Consecutive staypoints at the SAME location_id
â€¢ Time gap between them < max_time_gap (1 minute)
â€¢ Result: Combined into single staypoint with extended duration

Before Merging:
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ user_id â”‚ started_at          â”‚ finished_at         â”‚ location_id â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ user_1  â”‚ 2021-10-24 08:00:00 â”‚ 2021-10-24 08:30:00 â”‚ 42          â”‚
â”‚ 1  â”‚ user_1  â”‚ 2021-10-24 08:30:30 â”‚ 2021-10-24 09:00:00 â”‚ 42          â”‚ â† 30s gap
â”‚ 2  â”‚ user_1  â”‚ 2021-10-24 09:15:00 â”‚ 2021-10-24 10:00:00 â”‚ 15          â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

After Merging (max_time_gap=1min):
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ user_id â”‚ started_at          â”‚ finished_at         â”‚ location_id â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ user_1  â”‚ 2021-10-24 08:00:00 â”‚ 2021-10-24 09:00:00 â”‚ 42          â”‚ â† Merged!
â”‚ 1  â”‚ user_1  â”‚ 2021-10-24 09:15:00 â”‚ 2021-10-24 10:00:00 â”‚ 15          â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Processed Data Structures

### 8. Sequence Dictionary (Train/Val/Test .pk files)

**File**: `{dataset}_train.pk`, `{dataset}_validation.pk`, `{dataset}_test.pk`  
**Format**: Python Pickle (list of dictionaries)

```
Structure: List[Dict]

Each dictionary represents ONE training sample:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Key             â”‚ Type            â”‚ Description                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ X               â”‚ numpy.ndarray   â”‚ Sequence of location IDs (history)                â”‚
â”‚ user_X          â”‚ numpy.ndarray   â”‚ User ID repeated for each history step            â”‚
â”‚ weekday_X       â”‚ numpy.ndarray   â”‚ Day of week for each history step (0-6)           â”‚
â”‚ start_min_X     â”‚ numpy.ndarray   â”‚ Start minute for each history step (0-1439)       â”‚
â”‚ dur_X           â”‚ numpy.ndarray   â”‚ Duration in minutes for each history step         â”‚
â”‚ diff            â”‚ numpy.ndarray   â”‚ Days difference to target for each history step   â”‚
â”‚ Y               â”‚ int             â”‚ Target location ID to predict                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Detailed Example:

Sample sequence for user at Day 10, predicting next location:

History (7 staypoints from Day 3 to Day 9):
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ idx â”‚ Day  â”‚ location  â”‚ weekday â”‚ start_min â”‚ duration â”‚ diff â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0   â”‚ 3    â”‚ 44        â”‚ 2       â”‚ 420       â”‚ 380      â”‚ 7    â”‚
â”‚ 1   â”‚ 4    â”‚ 17        â”‚ 3       â”‚ 540       â”‚ 210      â”‚ 6    â”‚
â”‚ 2   â”‚ 5    â”‚ 44        â”‚ 4       â”‚ 480       â”‚ 240      â”‚ 5    â”‚
â”‚ 3   â”‚ 6    â”‚ 10        â”‚ 5       â”‚ 600       â”‚ 105      â”‚ 4    â”‚
â”‚ 4   â”‚ 7    â”‚ 44        â”‚ 6       â”‚ 450       â”‚ 660      â”‚ 3    â”‚
â”‚ 5   â”‚ 8    â”‚ 17        â”‚ 0       â”‚ 540       â”‚ 210      â”‚ 2    â”‚
â”‚ 6   â”‚ 9    â”‚ 44        â”‚ 1       â”‚ 420       â”‚ 380      â”‚ 1    â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜

Target: location_id = 17 (Day 10)

Resulting Dictionary:
{
    "X":           array([44, 17, 44, 10, 44, 17, 44]),  # Location sequence
    "user_X":      array([1, 1, 1, 1, 1, 1, 1]),         # Same user throughout
    "weekday_X":   array([2, 3, 4, 5, 6, 0, 1]),         # Wed, Thu, Fri, Sat, Sun, Mon, Tue
    "start_min_X": array([420, 540, 480, 600, 450, 540, 420]),  # 7:00, 9:00, 8:00, etc.
    "dur_X":       array([380, 210, 240, 105, 660, 210, 380]),  # Duration in minutes
    "diff":        array([7, 6, 5, 4, 3, 2, 1]),         # Days before target
    "Y":           17                                     # Target location
}

Location ID Encoding:
â€¢ 0 = Padding (for variable-length sequences)
â€¢ 1 = Unknown location (unseen in training)
â€¢ 2+ = Actual location IDs

Array Shapes (for batch processing):
â€¢ X.shape = (sequence_length,) - variable per sample
â€¢ user_X.shape = (sequence_length,) - same as X
â€¢ weekday_X.shape = (sequence_length,) - same as X
â€¢ start_min_X.shape = (sequence_length,) - same as X
â€¢ dur_X.shape = (sequence_length,) - same as X
â€¢ diff.shape = (sequence_length,) - same as X
â€¢ Y = scalar integer
```

### 9. Loading Processed Data (Python Code)

```python
import pickle

# Load training data
with open("data/diy_eps50/processed/diy_eps50_prev7_train.pk", "rb") as f:
    train_data = pickle.load(f)

# train_data is a list of dictionaries
print(f"Number of training samples: {len(train_data)}")

# Access first sample
sample = train_data[0]
print(f"History locations: {sample['X']}")
print(f"Target location: {sample['Y']}")
print(f"Sequence length: {len(sample['X'])}")

# Iterate through all samples
for i, sample in enumerate(train_data):
    X = sample['X']          # History location IDs
    Y = sample['Y']          # Target location ID
    weekday = sample['weekday_X']  # Weekday features
    # ... use in model training
```

---

## Metadata Structure

### 10. Metadata JSON File

**File**: `{dataset}_metadata.json`  
**Format**: JSON

```json
{
    "dataset_name": "diy",
    "output_dataset_name": "diy_eps50_prev7",
    "epsilon": 50,
    "previous_day": 7,
    "total_user_num": 156,
    "total_loc_num": 4523,
    "unique_users": 155,
    "unique_locations": 4521,
    "total_staypoints": 125432,
    "valid_staypoints": 98765,
    "train_staypoints": 78432,
    "val_staypoints": 9876,
    "test_staypoints": 9889,
    "train_sequences": 65234,
    "val_sequences": 8123,
    "test_sequences": 8234,
    "total_sequences": 81591,
    "split_ratios": {
        "train": 0.8,
        "val": 0.1,
        "test": 0.1
    },
    "max_duration_minutes": 2880
}

Field Descriptions:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Field               â”‚ Description                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ dataset_name        â”‚ Base dataset name ("diy")                                       â”‚
â”‚ output_dataset_name â”‚ Full output name with parameters                                â”‚
â”‚ epsilon             â”‚ DBSCAN epsilon parameter (meters)                               â”‚
â”‚ previous_day        â”‚ History window size (days)                                      â”‚
â”‚ total_user_num      â”‚ Maximum user ID + 1 (for embedding size)                        â”‚
â”‚ total_loc_num       â”‚ Maximum location ID + 1 (for embedding size)                    â”‚
â”‚ unique_users        â”‚ Actual number of unique users                                   â”‚
â”‚ unique_locations    â”‚ Actual number of unique locations                               â”‚
â”‚ total_staypoints    â”‚ Total staypoints after filtering                                â”‚
â”‚ valid_staypoints    â”‚ Staypoints that form valid sequences                            â”‚
â”‚ train_staypoints    â”‚ Staypoints in training split                                    â”‚
â”‚ val_staypoints      â”‚ Staypoints in validation split                                  â”‚
â”‚ test_staypoints     â”‚ Staypoints in test split                                        â”‚
â”‚ train_sequences     â”‚ Number of training sequences                                    â”‚
â”‚ val_sequences       â”‚ Number of validation sequences                                  â”‚
â”‚ test_sequences      â”‚ Number of test sequences                                        â”‚
â”‚ total_sequences     â”‚ Total number of sequences                                       â”‚
â”‚ split_ratios        â”‚ Train/val/test split ratios                                     â”‚
â”‚ max_duration_minutesâ”‚ Maximum duration truncation value                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Usage in Model:
â€¢ total_user_num: Size of user embedding layer
â€¢ total_loc_num: Size of location embedding layer + output vocabulary size
```

---

## Complete Data Flow Example

### End-to-End Example: Single User Journey

```
USER: alice_uuid_12345
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

STEP 1: RAW GPS POINTS (Notebook Input)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Day 1 (2021-10-24):
  08:00 â†’ GPS point at (-7.7478, 110.4315) - Home
  08:01 â†’ GPS point at (-7.7478, 110.4315) - Home
  ...
  12:30 â†’ GPS point at (-7.7117, 110.3857) - Office
  12:31 â†’ GPS point at (-7.7117, 110.3858) - Office
  ...
  18:00 â†’ GPS point at (-7.7640, 110.3905) - Mall
  ...
  22:00 â†’ GPS point at (-7.7478, 110.4315) - Home


STEP 2: STAYPOINTS (Notebook Output â†’ Script 1 Input)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ started_at          â”‚ finished_at         â”‚ geom                        â”‚ is_activity â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ 2021-10-24 08:00:00 â”‚ 2021-10-24 12:00:00 â”‚ POINT(110.4315 -7.7478)     â”‚ True (Home) â”‚
â”‚ 1  â”‚ 2021-10-24 12:30:00 â”‚ 2021-10-24 17:30:00 â”‚ POINT(110.3857 -7.7117)     â”‚ True (Office)â”‚
â”‚ 2  â”‚ 2021-10-24 18:00:00 â”‚ 2021-10-24 20:00:00 â”‚ POINT(110.3905 -7.7640)     â”‚ True (Mall) â”‚
â”‚ 3  â”‚ 2021-10-24 22:00:00 â”‚ 2021-10-25 07:00:00 â”‚ POINT(110.4315 -7.7478)     â”‚ True (Home) â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


STEP 3: LOCATIONS ASSIGNED (Script 1 - DBSCAN Clustering)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Clustering Result:
â€¢ POINT(110.4315 -7.7478) â†’ location_id = 42 (Home cluster)
â€¢ POINT(110.3857 -7.7117) â†’ location_id = 15 (Office cluster)
â€¢ POINT(110.3905 -7.7640) â†’ location_id = 8  (Mall cluster)

Staypoints with Locations:
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ started_at          â”‚ finished_at         â”‚ location_id â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ 2021-10-24 08:00:00 â”‚ 2021-10-24 12:00:00 â”‚ 42 (Home)   â”‚
â”‚ 1  â”‚ 2021-10-24 12:30:00 â”‚ 2021-10-24 17:30:00 â”‚ 15 (Office) â”‚
â”‚ 2  â”‚ 2021-10-24 18:00:00 â”‚ 2021-10-24 20:00:00 â”‚ 8 (Mall)    â”‚
â”‚ 3  â”‚ 2021-10-24 22:00:00 â”‚ 2021-10-25 07:00:00 â”‚ 42 (Home)   â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


STEP 4: TEMPORAL FEATURES (Script 1 - Enrichment)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ user_id â”‚ location_id â”‚ start_day â”‚ start_min â”‚ weekday â”‚ duration â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ 0       â”‚ 42          â”‚ 0         â”‚ 480       â”‚ 6 (Sun) â”‚ 240      â”‚
â”‚ 1  â”‚ 0       â”‚ 15          â”‚ 0         â”‚ 750       â”‚ 6 (Sun) â”‚ 300      â”‚
â”‚ 2  â”‚ 0       â”‚ 8           â”‚ 0         â”‚ 1080      â”‚ 6 (Sun) â”‚ 120      â”‚
â”‚ 3  â”‚ 0       â”‚ 42          â”‚ 0         â”‚ 1320      â”‚ 6 (Sun) â”‚ 540      â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Calculation Examples:
â€¢ start_min for 08:00 = 8 * 60 + 0 = 480
â€¢ start_min for 12:30 = 12 * 60 + 30 = 750
â€¢ duration for 08:00-12:00 = 4 hours = 240 minutes


STEP 5: ENCODED LOCATIONS (Script 2 - Encoding)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Original location_id â†’ Encoded location_id (+ 2 offset):
â€¢ 42 (Home)   â†’ 44  (after OrdinalEncoder + 2)
â€¢ 15 (Office) â†’ 17
â€¢ 8 (Mall)    â†’ 10


STEP 6: SEQUENCE GENERATION (Script 2 - For Day 7 target)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Target: Staypoint at Day 7, location_id = 17 (Office)

History Window (previous_day=7, looking back from Day 7):
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ Day â”‚ location  â”‚ weekday â”‚ start_min â”‚ duration â”‚ diff â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0   â”‚ 44 (Home) â”‚ 6       â”‚ 480       â”‚ 240      â”‚ 7    â”‚
â”‚ 0   â”‚ 17 (Office)â”‚ 6      â”‚ 750       â”‚ 300      â”‚ 7    â”‚
â”‚ 0   â”‚ 10 (Mall) â”‚ 6       â”‚ 1080      â”‚ 120      â”‚ 7    â”‚
â”‚ 0   â”‚ 44 (Home) â”‚ 6       â”‚ 1320      â”‚ 540      â”‚ 7    â”‚
â”‚ 1   â”‚ 44 (Home) â”‚ 0       â”‚ 420       â”‚ 300      â”‚ 6    â”‚
â”‚ ... â”‚ ...       â”‚ ...     â”‚ ...       â”‚ ...      â”‚ ...  â”‚
â”‚ 6   â”‚ 44 (Home) â”‚ 5       â”‚ 420       â”‚ 300      â”‚ 1    â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜

Final Sequence Dictionary:
{
    "X":           [44, 17, 10, 44, 44, ..., 44],
    "user_X":      [1, 1, 1, 1, 1, ..., 1],
    "weekday_X":   [6, 6, 6, 6, 0, ..., 5],
    "start_min_X": [480, 750, 1080, 1320, 420, ..., 420],
    "dur_X":       [240, 300, 120, 540, 300, ..., 300],
    "diff":        [7, 7, 7, 7, 6, ..., 1],
    "Y":           17
}
```

---

## Summary

This document covered all data structures in the DIY preprocessing pipeline:

1. **Raw Data**: GPS points with user_id, lat/lon, timestamp
2. **Staypoints**: Detected stationary periods with activity flags
3. **Locations**: Clustered locations from staypoints
4. **Intermediate**: Temporal-enriched staypoints
5. **Sequences**: Final X/Y pairs with features for model training
6. **Metadata**: Dataset statistics and configuration

Understanding these structures is essential for:
- Debugging preprocessing issues
- Extending the pipeline with new features
- Building compatible models
- Analyzing dataset characteristics
